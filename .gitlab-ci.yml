stages:
  - test

maven:
  stage: test
  image: maven:latest
  variables:
    MAVEN_OPTS: >-
      -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository
  cache:
    paths:
      - .m2/repository
  script:
    - mvn --version
    - mvn test
    - mvn verify # runs OWASP dependency-check
  artifacts:
    paths:
      - target/dependency-check-report.html

# included in test stage
include:
  - template: Jobs/SAST.gitlab-ci.yml
